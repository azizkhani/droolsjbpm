<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">


<hibernate-mapping>

    <class name="org.drools.repository.RuleDef" 
    	table="RULE_DEFINITIONS" 
    	entity-name="org.drools.repository.RuleDef" select-before-update="true">
        <id name="id" column="RULE_ID">
            <generator class="native"/>
        </id>
        
       	<property name="name"/>
       	<property name="versionNumber" />
		<property name="content" />   
		<property name="status" />	
		<property name="checkedOut" />	
		<property name="checkedOutBy" />	
		<property name="versionComment" />
		<property name="documentation" />		
		<property name="effectiveDate" />		
		<property name="expiryDate" />					
		<property name="historicalId" />
		<property name="historicalRecord" />
		
		<set name="tags" table="RULE_TAGS" lazy="false" cascade="all" optimistic-lock="false">
		    <key column="RULE_ID"/>
		    <one-to-many class="org.drools.repository.Tag"  />
		</set>       
		
		<component name="metaData">
			<property name="title" />
			<property name="creator" />
			<property name="subject" />
			<property name="description" />
			<property name="publisher" />
			<property name="contributor" />
			<property name="dateCreated" />
			<property name="format" />
			<property name="source" />
			<property name="language" />
			<property name="relation" />
			<property name="coverage" />
			<property name="rights" />
		</component>		 
 
		<filter name="historyFilter" condition=":viewHistory = historicalRecord" />
    </class>

	<filter-def name="historyFilter">
		<filter-param name="viewHistory" type="boolean" />
	</filter-def>      
   

</hibernate-mapping>        